<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Unity WebGL Player | 3D Model Viewer</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: #000;
            color: #fff;
            font-family: Arial, sans-serif;
            overflow: hidden;
        }
        
        #unity-container {
            width: 100vw;
            height: 100vh;
            position: relative;
        }
        
        #unity-canvas {
            width: 100%;
            height: 100%;
            display: block;
        }
        
        #unity-loading-bar {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            display: none;
        }
        
        #unity-logo {
            width: 154px;
            height: 130px;
            background: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTU0IiBoZWlnaHQ9IjEzMCIgdmlld0JveD0iMCAwIDE1NCAxMzAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxNTQiIGhlaWdodD0iMTMwIiBmaWxsPSIjMDAwMDAwIi8+CjxwYXRoIGQ9Ik03NyA2NUw1MSA5MUw3NyAxMTdMMTAzIDkxTDc3IDY1WiIgZmlsbD0iIzAwRkZGRiIvPgo8L3N2Zz4K') no-repeat center / contain;
        }
        
        #unity-progress-bar-empty {
            width: 141px;
            height: 18px;
            margin-top: 10px;
            background: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQxIiBoZWlnaHQ9IjE4IiB2aWV3Qm94PSIwIDAgMTQxIDE4IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cmVjdCB3aWR0aD0iMTQxIiBoZWlnaHQ9IjE4IiBmaWxsPSIjMzMzMzMzIi8+Cjwvc3ZnPgo=') no-repeat center / contain;
        }
        
        #unity-progress-bar-full {
            width: 0%;
            height: 18px;
            background: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQxIiBoZWlnaHQ9IjE4IiB2aWV3Qm94PSIwIDAgMTQxIDE4IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cmVjdCB3aWR0aD0iMTQxIiBoZWlnaHQ9IjE4IiBmaWxsPSIjMDBGRkZGIi8+Cjwvc3ZnPgo=') no-repeat center / contain;
        }
        
        #unity-fullscreen-button {
            position: absolute;
            right: 10px;
            bottom: 10px;
            width: 38px;
            height: 38px;
            background: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzgiIGhlaWdodD0iMzgiIHZpZXdCb3g9IjAgMCAzOCAzOCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjM4IiBoZWlnaHQ9IjM4IiBmaWxsPSIjMDAwMDAwIi8+CjxwYXRoIGQ9Ik0xMCAxMEgxNFYxNEgxMFYxMFoiIGZpbGw9IiMwMEZGRkYiLz4KPHBhdGggZD0iTTI0IDEwSDI4VjE0SDI0VjEwWiIgZmlsbD0iIzAwRkZGRiIvPgo8cGF0aCBkPSJNMTAgMjRIMTRWMjhIMTBWMjRaIiBmaWxsPSIjMDBGRkZGIi8+CjxwYXRoIGQ9Ik0yNCAyNEgyOFYyOEgyNFYyNFoiIGZpbGw9IiMwMEZGRkYiLz4KPC9zdmc+Cg==') no-repeat center / contain;
            cursor: pointer;
        }
        
        .unity-message {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.8);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            display: none;
        }
    </style>
</head>
<body>
    <div id="unity-container">
        <canvas id="unity-canvas" tabindex="-1"></canvas>
        <div id="unity-loading-bar">
            <div id="unity-logo"></div>
            <div id="unity-progress-bar-empty">
                <div id="unity-progress-bar-full"></div>
            </div>
        </div>
        <div id="unity-fullscreen-button" onclick="SetFullscreen(1)"></div>
        <div id="unity-message" class="unity-message">
            <h3>üéÆ Unity 3D Model Viewer</h3>
            <p>–î–µ–º–æ-–≤–µ—Ä—Å–∏—è Unity WebGL –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</p>
            <p>–ó–¥–µ—Å—å –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –≤–∞—à–∞ 3D –º–æ–¥–µ–ª—å —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π</p>
        </div>
    </div>

    <script>
        // Unity WebGL –∑–∞–≥–ª—É—à–∫–∞
        let unityInstance = null;
        let isReady = false;
        let animationSpeed = 1.0;
        let scale = 1.0;
        let autoRotate = false;
        let currentModel = 'dinosaur';
        let currentAnimation = 'idle';

        // –°–∏–º—É–ª—è—Ü–∏—è Unity WebGL
        function initUnity() {
            console.log('üéÆ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Unity WebGL...');
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –≤–º–µ—Å—Ç–æ —Ä–µ–∞–ª—å–Ω–æ–≥–æ Unity
            setTimeout(() => {
                document.getElementById('unity-loading-bar').style.display = 'none';
                document.getElementById('unity-message').style.display = 'block';
                
                // –°–∏–º—É–ª–∏—Ä—É–µ–º –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å Unity
                setTimeout(() => {
                    isReady = true;
                    sendMessageToParent({ type: 'UnityReady' });
                    console.log('‚úÖ Unity –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!');
                }, 500); // –£–º–µ–Ω—å—à–∏–ª–∏ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è
            }, 1000); // –£–º–µ–Ω—å—à–∏–ª–∏ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è
        }

        // –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–º—É –æ–∫–Ω—É
        function sendMessageToParent(message) {
            if (window.parent && window.parent !== window) {
                window.parent.postMessage(message, '*');
            }
        }

        // –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ç —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –æ–∫–Ω–∞
        window.addEventListener('message', function(event) {
            const data = event.data;
            
            if (data.type === 'HTMLReady') {
                console.log('üì± HTML –≥–æ—Ç–æ–≤, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º Unity...');
                initUnity();
            } else if (data.type === 'CallUnityMethod') {
                handleUnityMethod(data.method, data.parameter);
            }
        });

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –º–µ—Ç–æ–¥–æ–≤ Unity
        function handleUnityMethod(method, parameter) {
            if (!isReady) {
                console.log('‚ö†Ô∏è Unity –µ—â–µ –Ω–µ –≥–æ—Ç–æ–≤');
                return;
            }

            console.log(`üéÆ –í—ã–∑–æ–≤ Unity –º–µ—Ç–æ–¥–∞: ${method}`, parameter);

            switch (method) {
                case 'PlayAnimation':
                    playAnimation(parameter);
                    break;
                case 'ChangeModel':
                    changeModel(parameter);
                    break;
                case 'ResetCamera':
                    resetCamera();
                    break;
                case 'ToggleAutoRotate':
                    toggleAutoRotate();
                    break;
                case 'SetScale':
                    setScale(parameter);
                    break;
                case 'SetAnimationSpeed':
                    setAnimationSpeed(parameter);
                    break;
                default:
                    console.log('‚ùì –ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –º–µ—Ç–æ–¥:', method);
            }
        }

        function playAnimation(animationName) {
            currentAnimation = animationName;
            console.log(`üé¨ –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∞–Ω–∏–º–∞—Ü–∏–∏: ${animationName}`);
            
            // –°–∏–º—É–ª—è—Ü–∏—è –∞–Ω–∏–º–∞—Ü–∏–∏
            const message = document.getElementById('unity-message');
            message.innerHTML = `
                <h3>üéÆ Unity 3D Model Viewer</h3>
                <p>–ú–æ–¥–µ–ª—å: ${currentModel}</p>
                <p>–ê–Ω–∏–º–∞—Ü–∏—è: ${animationName}</p>
                <p>–°–∫–æ—Ä–æ—Å—Ç—å: ${animationSpeed}x</p>
                <p>–ú–∞—Å—à—Ç–∞–±: ${scale}x</p>
            `;
        }

        function changeModel(modelName) {
            currentModel = modelName;
            console.log(`üîÑ –°–º–µ–Ω–∞ –º–æ–¥–µ–ª–∏: ${modelName}`);
            playAnimation(currentAnimation);
        }

        function resetCamera() {
            console.log('üì∑ –°–±—Ä–æ—Å –∫–∞–º–µ—Ä—ã');
        }

        function toggleAutoRotate() {
            autoRotate = !autoRotate;
            console.log(`üîÑ –ê–≤—Ç–æ–ø–æ–≤–æ—Ä–æ—Ç: ${autoRotate ? '–≤–∫–ª—é—á–µ–Ω' : '–≤—ã–∫–ª—é—á–µ–Ω'}`);
        }

        function setScale(value) {
            scale = value;
            console.log(`üìè –ú–∞—Å—à—Ç–∞–±: ${scale}`);
            playAnimation(currentAnimation);
        }

        function setAnimationSpeed(value) {
            animationSpeed = value;
            console.log(`‚ö° –°–∫–æ—Ä–æ—Å—Ç—å –∞–Ω–∏–º–∞—Ü–∏–∏: ${animationSpeed}`);
            playAnimation(currentAnimation);
        }

        // –°–∏–º—É–ª—è—Ü–∏—è FPS
        function simulateFPS() {
            if (isReady) {
                const fps = Math.floor(Math.random() * 30) + 30; // 30-60 FPS
                sendMessageToParent({ type: 'FPS', fps: fps });
            }
        }

        // –ó–∞–ø—É—Å–∫ —Å–∏–º—É–ª—è—Ü–∏–∏ FPS
        setInterval(simulateFPS, 1000);

        // –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º
        function SetFullscreen(flag) {
            if (flag) {
                if (document.documentElement.requestFullscreen) {
                    document.documentElement.requestFullscreen();
                }
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                }
            }
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
        window.addEventListener('error', function(event) {
            console.error('‚ùå –û—à–∏–±–∫–∞ Unity:', event.error);
            sendMessageToParent({ type: 'UnityError', message: event.error.message });
        });

        console.log('üéÆ Unity WebGL –∑–∞–≥–ª—É—à–∫–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º Unity –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.addEventListener('load', function() {
            console.log('üì± –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º Unity...');
            initUnity();
        });
        
        // –¢–∞–∫–∂–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Å—Ä–∞–∑—É, –µ—Å–ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —É–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω–∞
        if (document.readyState === 'complete') {
            console.log('üì± –°—Ç—Ä–∞–Ω–∏—Ü–∞ —É–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω–∞, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º Unity...');
            initUnity();
        }
        
        // Fallback - –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º UnityReady —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã –≤ –ª—é–±–æ–º —Å–ª—É—á–∞–µ
        setTimeout(() => {
            if (!isReady) {
                console.log('‚ö†Ô∏è Fallback: –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º UnityReady –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ');
                isReady = true;
                sendMessageToParent({ type: 'UnityReady' });
            }
        }, 3000);
    </script>
</body>
</html>
